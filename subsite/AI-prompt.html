<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-B9SBKGW14B"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-B9SBKGW14B');
    </script>
    
    <title>讓 AI 更聰明：揭秘背後的溝通藝術 | 科科 AI Shorts</title>
    
    <!-- SEO and AI Search Optimization -->
    <meta name="description" content="深入了解如何透過思維鏈 (CoT)、思維樹 (ToT)、RAG 等先進技術，與 AI 進行更有效的溝通。本頁提供互動式教學、提示詞 (Prompt) 解析與企業級 AI 解決方案。">
    <meta name="keywords" content="AI, 人工智慧, 提示工程, Prompt Engineering, 思維鏈, CoT, 思維樹, ToT, RAG, 大型語言模型, LLM, AI溝通, AI團隊, WebBrain, 科科 AI Shorts">
    <meta name="author" content="科科 AI Shorts">
    <link rel="canonical" href="https://www.keke-ai-shorts.com/subsite/AI-prompt.html">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://www.keke-ai-shorts.com/subsite/AI-prompt.html">
    <meta property="og:title" content="讓 AI 更聰明：揭秘背後的溝通藝術 | 科科 AI Shorts">
    <meta property="og:description" content="深入了解如何透過思維鏈 (CoT)、思維樹 (ToT)、RAG 等先進技術，與 AI 進行更有效的溝通。本頁提供互動式教學、提示詞 (Prompt) 解析與企業級 AI 解決方案。">
    <meta property="og:image" content="https://www.keke-ai-shorts.com/assets/og-prompt-page.jpg">
    <meta property="og:site_name" content="科科 AI Shorts">
    <meta property="og:locale" content="zh_TW">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://www.keke-ai-shorts.com/subsite/AI-prompt.html">
    <meta property="twitter:title" content="讓 AI 更聰明：揭秘背後的溝通藝術 | 科科 AI Shorts">
    <meta property="twitter:description" content="深入了解如何透過思維鏈 (CoT)、思維樹 (ToT)、RAG 等先進技術，與 AI 進行更有效的溝通。本頁提供互動式教學、提示詞 (Prompt) 解析與企業級 AI 解決方案。">
    <meta property="twitter:image" content="https://www.keke-ai-shorts.com/assets/og-prompt-page.jpg">

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Structured Data for AI Search (JSON-LD) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Article",
      "headline": "讓 AI 更聰明：揭秘背後的溝通藝術",
      "description": "一篇關於如何優化與 AI 溝通的深度指南。文章涵蓋了從基本概念（如將 AI 視為團隊）到高級技術（如 CoT、ToT、RAG）的全面介紹，並提供互動練習和專家提示詞解析，幫助讀者掌握與 AI 高效協作的藝術。",
      "author": {
        "@type": "Organization",
        "name": "科科 AI Shorts"
      },
      "publisher": {
        "@type": "Organization",
        "name": "WebBrain",
        "logo": {
          "@type": "ImageObject",
          "url": "https://www.keke-ai-shorts.com/images/logo.png"
        }
      },
      "datePublished": "2024-05-21",
      "dateModified": "2024-05-21",
      "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://www.keke-ai-shorts.com/subsite/AI-prompt.html"
      },
      "image": "https://www.keke-ai-shorts.com/images/og-prompt-page.jpg",
      "keywords": "AI, 人工智慧, 提示工程, Prompt Engineering, 思維鏈, CoT, 思維樹, ToT, RAG, 大型語言模型, LLM, AI溝通, AI團隊, WebBrain, 科科 AI Shorts",
      "inLanguage": "zh-Hant"
    }
    </script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Tech Mint (#00f2c3) -->
    <!-- Application Structure Plan: The application is a single, linear, scrollable page. The layout has been reordered to present the prompt analysis before the interactive tools, creating a better learning flow. The "Planner" and "Manager" agent sections are permanently displayed side-by-side to better represent the "Teamwork" concept. -->
    <!-- Visualization & Content Choices: 1. Report Info: Table comparing CoT, ToT, RAG, etc. -> Goal: Compare technologies. -> Viz/Method: Interactive Radar Chart (Chart.js) and dynamic text blocks. 2. Report Info: Hierarchical Agent System concept. -> Goal: Explain a process flow. -> Viz/Method: A side-by-side layout for Planner and Manager agents, with interactive Gemini components. The Manager's review is a static example. 3. New Feature: Side-by-side prompt analysis. -> Goal: Provide deep technical context. -> Viz/Method: A two-column layout. All choices confirm NO SVG/Mermaid. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        html {
            scroll-behavior: smooth;
        }
        body { 
            /* Use Roboto for English and Noto Sans TC as fallback for Chinese */
            font-family: 'Roboto', 'Noto Sans TC', sans-serif; 
            background-color: #f0fdfa; /* A very light mint, derived from #00f2c3 */
        }
        .tech-button-active {
            background-color: #00f2c3; 
            color: #111827;
            transform: scale(1.05);
            box-shadow: 0 4px 14px 0 rgba(0, 242, 195, 0.39);
        }
        .tech-button-inactive {
            background-color: white;
            color: #334155; /* slate-700 */
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 450px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 40vh;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
                max-height: 50vh;
            }
        }
        .gemini-btn:disabled {
            background-color: #94a3b8;
            cursor: not-allowed;
        }
        .loader {
            width: 2rem;
            height: 2rem;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #0d9488; /* A darker teal for contrast */
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .prompt-code {
            font-family: 'Menlo', 'Monaco', 'Courier New', monospace;
            font-size: 0.75rem;
            line-height: 1.5;
            background-color: #1e293b; /* slate-800 */
            color: #e2e8f0; /* slate-200 */
            padding: 1rem;
            border-radius: 0.5rem;
            overflow-x: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
    </style>
</head>
<body class="text-slate-800">

    <div class="container mx-auto p-4 md:p-8">
        
        <!-- Language Switcher and Back to Home -->
        <div class="mb-8 flex justify-between items-center">
            <a href="../index.html" class="text-teal-400 hover:text-teal-300 transition-colors duration-300" data-lang-key="backToHome">&larr; 回到首頁</a>
            <div class="flex items-center space-x-2 text-sm">
                <button id="lang-zh" class="px-3 py-1 rounded-md text-slate-600 bg-white">繁中</button>
                <button id="lang-en" class="px-3 py-1 rounded-md text-slate-600 bg-white">EN</button>
            </div>
        </div>

        <header class="text-center mb-12 md:mb-16">
            <h1 class="text-4xl md:text-5xl font-bold text-[#00a185] mb-3" data-lang-key="mainTitle">讓 AI 更聰明</h1>
            <p class="text-lg md:text-xl text-slate-600 mb-8" data-lang-key="subTitle">揭秘背後的溝通藝術</p>
            <nav class="bg-white/80 backdrop-blur-md rounded-full shadow-lg sticky top-4 z-50 inline-block">
                <ul class="flex items-center justify-center p-2 space-x-1">
                    <li><a href="#overview" class="text-sm md:text-base px-4 py-2 rounded-full text-slate-600 hover:bg-[#f0fdfa] hover:text-[#00a185] font-medium transition-colors duration-300" data-lang-key="navAiTeam">AI 團隊</a></li>
                    <li><a href="#tools" class="text-sm md:text-base px-4 py-2 rounded-full text-slate-600 hover:bg-[#f0fdfa] hover:text-[#00a185] font-medium transition-colors duration-300" data-lang-key="navToolbox">工具箱</a></li>
                    <li><a href="#prompt-analysis" class="text-sm md:text-base px-4 py-2 rounded-full text-slate-600 hover:bg-[#f0fdfa] hover:text-[#00a185] font-medium transition-colors duration-300" data-lang-key="navPromptAnalysis">提示詞解析</a></li>
                    <li><a href="#interactive-practice" class="text-sm md:text-base px-4 py-2 rounded-full text-slate-600 hover:bg-[#f0fdfa] hover:text-[#00a185] font-medium transition-colors duration-300" data-lang-key="navInteractivePractice">互動練習</a></li>
                    <li><a href="#webbrain-contact" class="text-sm md:text-base px-4 py-2 rounded-full text-slate-600 hover:bg-[#f0fdfa] hover:text-[#00a185] font-medium transition-colors duration-300" data-lang-key="navBusinessSolutions">企業方案</a></li>
                </ul>
            </nav>
        </header>

        <main>
            <section id="overview" class="mb-12 md:mb-16">
                <div class="bg-white p-6 md:p-8 rounded-2xl shadow-lg border-t-4 border-[#00f2c3]">
                    <h2 class="text-3xl font-bold text-center mb-4 text-slate-800" data-lang-key="storyTitle">故事開始：讓 AI 像團隊一樣工作</h2>
                    <p class="text-slate-600 text-center mb-10 max-w-3xl mx-auto" data-lang-key="storyDesc">想讓 AI 完成複雜任務，只靠一句話是不夠的。我們可以像組建一個團隊一樣，讓不同的 AI 各司其職、互相合作。下面這五個秘訣，就是打造一個 AI 超級團隊的關鍵。</p>
                    
                    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12">
                        <div class="bg-[#f0fdfa] p-6 rounded-xl border border-[#a7f3d0] h-full">
                            <h3 class="font-bold text-lg text-[#047857] flex items-center gap-2 mb-3">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l5.447 2.724A1 1 0 0021 16.382V5.618a1 1 0 00-1.447-.894L15 7m-6 3v10m6-10v10m0-10L9 7" /></svg>
                                <span data-lang-key="secret1Title">給 AI 一張地圖</span>
                            </h3>
                            <p class="text-slate-600" data-lang-key="secret1Desc">就像填寫表格一樣，給 AI 一個固定的格式，它就能更準確地理解你的意思，不會出錯。</p>
                        </div>
                        <div class="bg-[#f0fdfa] p-6 rounded-xl border border-[#a7f3d0] h-full">
                             <h3 class="font-bold text-lg text-[#047857] flex items-center gap-2 mb-3">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" /></svg>
                                <span data-lang-key="secret2Title">當個好導演</span>
                            </h3>
                            <p class="text-slate-600" data-lang-key="secret2Desc">清楚地告訴 AI 它該扮演什麼角色、該怎麼思考，一步步引導它，而不是讓它猜你的心思。</p>
                        </div>
                        <div class="bg-[#f0fdfa] p-6 rounded-xl border border-[#a7f3d0] h-full">
                             <h3 class="font-bold text-lg text-[#047857] flex items-center gap-2 mb-3">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" /></svg>
                                <span data-lang-key="secret3Title">團隊合作力量大</span>
                            </h3>
                             <p class="text-slate-600" data-lang-key="secret3Desc">把一個大任務，拆成幾個小任務，交給不同的 AI 處理。例如一個 AI 負責想點子，另一個負責檢查，這樣合作效果最好。</p>
                        </div>
                        <div class="bg-[#f0fdfa] p-6 rounded-xl border border-[#a7f3d0] h-full">
                             <h3 class="font-bold text-lg text-[#047857] flex items-center gap-2 mb-3">
                                 <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" /></svg>
                                <span data-lang-key="secret4Title">給足參考資料</span>
                            </h3>
                            <p class="text-slate-600" data-lang-key="secret4Desc">AI 不是萬能的。給它一個隨時可以查詢的「資料庫」，讓它根據最新的、正確的資料來回答，結果才會可靠。</p>
                        </div>
                        <div class="bg-[#f0fdfa] p-6 rounded-xl border border-[#a7f3d0] h-full">
                             <h3 class="font-bold text-lg text-[#047857] flex items-center gap-2 mb-3">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 10l.01.01" /></svg>
                                <span data-lang-key="secret5Title">打破砂鍋問到底</span>
                            </h3>
                            <p class="text-slate-600" data-lang-key="secret5Desc">不要讓 AI 用「差不多」、「都可以」來敷衍。要求它把每種可能性都想清楚，並明確說出為什麼，這樣才能避免出錯。</p>
                        </div>
                    </div>

                    <h3 class="text-xl md:text-2xl font-bold text-center mb-6 text-slate-800" data-lang-key="workflowTitle">AI 團隊的合作流程</h3>
                    <div class="flex flex-col md:flex-row items-center justify-center gap-4 text-center">
                        <div class="p-4 bg-[#f0fdfa] border-2 border-[#a7f3d0] rounded-lg shadow-md flex-1">
                            <h4 class="font-bold text-[#047857]" data-lang-key="workflow1Title">1. AI 規劃師</h4>
                            <p class="text-sm text-[#065f46]" data-lang-key="workflow1Desc">思考所有可能</p>
                        </div>
                        <div class="text-3xl font-bold text-slate-400 transform md:rotate-0 rotate-90">&rarr;</div>
                        <div class="p-4 bg-[#f0fdfa] border-2 border-[#a7f3d0] rounded-lg shadow-md flex-1">
                            <h4 class="font-bold text-[#047857]" data-lang-key="workflow2Title">2. AI 品管員</h4>
                            <p class="text-sm text-[#065f46]" data-lang-key="workflow2Desc">檢查每個步驟</p>
                        </div>
                        <div class="text-3xl font-bold text-slate-400 transform md:rotate-0 rotate-90">&rarr;</div>
                        <div class="p-4 bg-[#f0fdfa] border-2 border-[#a7f3d0] rounded-lg shadow-md flex-1">
                            <h4 class="font-bold text-[#047857]" data-lang-key="workflow3Title">3. 執行任務</h4>
                            <p class="text-sm text-[#065f46]" data-lang-key="workflow3Desc">最終安全行動</p>
                        </div>
                    </div>
                </div>
            </section>
            
            <hr class="border-t-2 border-slate-200 my-12 md:my-16">

            <section id="tools" class="mb-12 md:mb-16">
                <div class="bg-white p-6 md:p-8 rounded-2xl shadow-lg border-t-4 border-[#00f2c3]">
                    <h2 class="text-3xl font-bold text-center mb-8 text-slate-800" data-lang-key="toolboxTitle">AI 的神奇工具箱</h2>
                     <div class="flex flex-wrap justify-center gap-2 md:gap-3 mb-8">
                        <button class="tech-button text-sm md:text-base font-medium py-2 px-4 rounded-full shadow-md transition-all duration-300" data-tech="CoT" data-lang-key="techCoTButton">一步一步想</button>
                        <button class="tech-button text-sm md:text-base font-medium py-2 px-4 rounded-full shadow-md transition-all duration-300" data-tech="Self-Consistency" data-lang-key="techSelfConsistencyButton">多想幾次，投票決定</button>
                        <button class="tech-button text-sm md:text-base font-medium py-2 px-4 rounded-full shadow-md transition-all duration-300" data-tech="ToT" data-lang-key="techToTButton">探索所有可能</button>
                        <button class="tech-button text-sm md:text-base font-medium py-2 px-4 rounded-full shadow-md transition-all duration-300" data-tech="RAG" data-lang-key="techRAGButton">開卷考試</button>
                        <button class="tech-button text-sm md:text-base font-medium py-2 px-4 rounded-full shadow-md transition-all duration-300" data-tech="Parahelp" data-lang-key="techParahelpButton">團隊合作</button>
                    </div>

                    <div class="grid lg:grid-cols-2 gap-8 items-center">
                        <div class="chart-container">
                            <canvas id="techRadarChart"></canvas>
                        </div>
                        <div id="tech-details" class="p-6 bg-[#f0fdfa] rounded-lg min-h-[300px] border border-[#a7f3d0]">
                            <h3 id="tech-name" class="text-xl font-bold mb-2 text-[#00a185]"></h3>
                            <p class="font-semibold text-slate-700" data-lang-key="techWhatIsIt">這是什麼意思？</p>
                            <p id="tech-idea" class="mb-4 text-slate-600"></p>
                            <p class="font-semibold text-slate-700" data-lang-key="techUseCase">適合用在哪？</p>
                            <p id="tech-usecase" class="mb-4 text-slate-600"></p>
                            <p class="font-semibold text-slate-700" data-lang-key="techLimitation">有什麼缺點？</p>
                            <p id="tech-limit" class="text-slate-600"></p>
                        </div>
                    </div>
                </div>
            </section>
            
            <hr class="border-t-2 border-slate-200 my-12 md:my-16">

            <section id="prompt-analysis" class="mb-12 md:mb-16">
                 <div class="bg-white p-6 md:p-8 rounded-2xl shadow-lg border-t-4 border-[#00f2c3]">
                    <h2 class="text-3xl font-bold text-center mb-8 text-slate-800" data-lang-key="promptAnalysisTitle">提示詞深度解析：原文與中文說明</h2>
                    <p class="text-slate-600 text-center mb-10 max-w-3xl mx-auto" data-lang-key="promptAnalysisDesc">想更深入了解 AI 如何思考嗎？這裡我們並列展示了「規劃師」與「品管員」的英文提示詞原文與中文解析，讓你一窺背後的設計巧思。</p>

                    <div class="space-y-12">
                        <!-- Planning Prompt Analysis -->
                        <div class="bg-[#f0fdfa] p-6 rounded-lg border border-[#a7f3d0]">
                             <h3 class="text-2xl font-bold text-[#00a185] mb-4" data-lang-key="plannerPromptTitle">規劃師提示詞 (Planning Prompt)</h3>
                             <div class="grid lg:grid-cols-2 gap-x-8 gap-y-6">
                                <div>
                                    <h4 class="font-bold text-lg mb-2 text-gray-500" data-lang-key="englishOriginal">英文原文</h4>
                                    <div class="prompt-code">
                                        <pre><code>## Plan elements
- A plan consists of steps.
- You can always include &lt;if_block&gt; tags to include different steps based on a condition.

### How to Plan
- When planning next steps, make sure it's only the goal of next steps, not the overall goal of the ticket or user.
- Make sure that the plan always follows the procedures and rules of the # Customer service agent Policy doc

### How to create a step
- A step will always include the name of the action (tool call), description of the action and the arguments needed for the action. It will also include a goal of the specific action.

The step should be in the following format:
&lt;step&gt;
&lt;action_name&gt;&lt;/action_name&gt;
&lt;description&gt;{reason for taking the action, description of the action to take, which outputs from other tool calls that should be used (if relevant)}&lt;/description&gt;
&lt;/step&gt;

- The action_name should always be the name of a valid tool
- The description should be a short description of why the action is needed, a description of the action to take and any variables from other tool calls the action needs e.g. "reply to the user with instrucitons from &lt;helpcenter_result&gt;"
- Make sure your description NEVER assumes any information, variables or tool call results even if you have a good idea of what the tool call returns from the SOP.
- Make sure your plan NEVER includes or guesses on information/instructions/rules for step descriptions that are not explicitly stated in the policy doc.
- Make sure you ALWAYS highlight in your description of answering questions/troubleshooting steps that &lt;helpcenter_result&gt; is the source of truth for the information you need to answer the question.

- Every step can have an if block, which is used to include different steps based on a condition.
- And if block can be used anywhere in a step and plan and should simply just be wrapped with the &lt;if_block condition=''&gt;&lt;/if_block&gt; tags. An &lt;if_block&gt; should always have a condition. To create multiple if/else blocks just create multiple &lt;if_block&gt; tags.

### High level example of a plan
_IMPORTANT_: This example of a plan is only to give you an idea of how to structure your plan with a few sample tools (in this example &lt;search_helpcenter&gt; and &lt;reply&gt;), it's not strict rules or how you should structure every plan - it's using variable names to give you an idea of how to structure your plan, think in possible paths and use &lt;tool_calls&gt; as variable names, and only general descriptions in your step descriptions.

Scenario: The user has error with feature_name and have provided basic information about the error

&lt;plan&gt;
    &lt;step&gt;
        &lt;action_name&gt;search_helpcenter&lt;/action_name&gt;
        &lt;description&gt;Search helpcenter for information about feature_name and how to resolve error_name&lt;/description&gt;
    &lt;/step&gt;
    &lt;if_block condition='&lt;helpcenter_result&gt; found'&gt;
        &lt;step&gt;
            &lt;action_name&gt;reply&lt;/action_name&gt;
            &lt;description&gt;Reply to the user with instructions from &lt;helpcenter_result&gt;&lt;/description&gt;
        &lt;/step&gt;
    &lt;/if_block&gt;
    &lt;if_block condition='no &lt;helpcenter_result&gt; found'&gt;
        &lt;step&gt;
            &lt;action_name&gt;search_helpcenter&lt;/action_name&gt;
            &lt;description&gt;Search helpcenter for general information about how to resolve error/troubleshoot&lt;/description&gt;
        &lt;/step&gt;
        &lt;if_block condition='&lt;helpcenter_result&gt; found'&gt;
            &lt;step&gt;
                &lt;action_name&gt;reply&lt;/action_name&gt;
                &lt;description&gt;Reply to the user with relevant instructions from general &lt;search_helpcenter_result&gt; information &lt;/description&gt;
            &lt;/step&gt;
        &lt;/if_block&gt;
        &lt;if_block condition='no &lt;helpcenter_result&gt; found'&gt;
            &lt;step&gt;
                &lt;action_name&gt;reply&lt;/action_name&gt;
                &lt;description&gt;If we can't find specific troubleshooting or general troubleshooting, reply to the user that we need more information and ask for a {{troubleshooting_info_name_from_policy_2}} of the error (since we already have {{troubleshooting_info_name_from_policy_1}}, but need {{troubleshooting_info_name_from_policy_2}} for more context to search helpcenter)&lt;/description&gt;
            &lt;step&gt;
        &lt;/if_block&gt;
    &lt;/if_block&gt;
&lt;/plan&gt;</code></pre>
                                    </div>
                                </div>
                                <div>
                                    <h4 class="font-bold text-lg mb-2 text-gray-500" data-lang-key="chineseTranslation">中文翻譯</h4>
                                    <div class="prompt-code" style="background-color: #f3f4f6; color: #1f2937;">
                                        <pre><code>## 計畫元素
- 一個計畫由多個步驟組成。
- 你永遠可以使用 &lt;if_block&gt; 標籤來根據條件包含不同的步驟。

### 如何規劃
- 當規劃後續步驟時，確保目標僅針對「後續步驟」，而不是工單或用戶的「總體目標」。
- 確保計畫永遠遵循 #客服人員政策 文件中的程序和規則。

### 如何建立一個步驟
- 一個步驟將永遠包含動作的名稱（工具調用）、動作的描述以及動作所需的參數。它也將包含該特定動作的目標。

步驟應遵循以下格式：
&lt;step&gt;
&lt;action_name&gt;&lt;/action_name&gt;
&lt;description&gt;{採取該動作的原因，要採取的動作的描述，以及應使用哪些來自其他工具調用的輸出（如果相關）}&lt;/description&gt;
&lt;/step&gt;

- action_name 應該永遠是一個有效工具的名稱。
- description 應該簡要說明為何需要此動作、要採取的動作的描述，以及動作需要的任何來自其他工具調用的變數，例如：「根據 &lt;helpcenter_result&gt; 的指示回覆使用者」。
- 確保你的描述「絕不」假設任何資訊、變數或工具調用結果，即使你根據標準作業流程很可能知道工具會返回什麼。
- 確保你的計畫「絕不」包含或猜測政策文件中未明確說明的步驟描述資訊/指示/規則。
- 確保你「總是」在回答問題/故障排除步驟的描述中強調，&lt;helpcenter_result&gt; 是你需要用來回答問題的資訊的「唯一真實來源」。

- 每一個步驟都可以有一個 if 區塊，用來根據條件包含不同的步驟。
- if 區塊可以在步驟和計畫中的任何地方使用，只需用 &lt;if_block condition=''&gt;&lt;/if_block&gt; 標籤包裹即可。一個 &lt;if_block&gt; 必須永遠有一個條件。若要建立多個 if/else 區塊，只需建立多個 &lt;if_block&gt; 標籤。

### 高層次計畫範例
_重要事項_：此計畫範例僅為讓您了解如何使用幾個範例工具（在此範例中為 &lt;search_helpcenter&gt; 和 &lt;reply&gt;）來建構您的計畫，並非嚴格規則或您應如何建構每個計畫的方式 - 它使用變數名稱來讓您了解如何建構計畫、思考可能的路徑、使用 &lt;tool_calls&gt; 作為變數名稱，並在步驟描述中僅使用一般性描述。

情境：使用者遇到 feature_name 的錯誤，並已提供有關該錯誤的基本資訊

&lt;plan&gt;
    &lt;step&gt;
        &lt;action_name&gt;search_helpcenter&lt;/action_name&gt;
        &lt;description&gt;搜尋幫助中心以獲取有關 feature_name 以及如何解決 error_name 的資訊&lt;/description&gt;
    &lt;/step&gt;
    &lt;if_block condition='找到 &lt;helpcenter_result&gt;'&gt;
        &lt;step&gt;
            &lt;action_name&gt;reply&lt;/action_name&gt;
            &lt;description&gt;根據 &lt;helpcenter_result&gt; 的指示回覆使用者&lt;/description&gt;
        &lt;/step&gt;
    &lt;/if_block&gt;
    &lt;if_block condition='未找到 &lt;helpcenter_result&gt;'&gt;
        &lt;step&gt;
            &lt;action_name&gt;search_helpcenter&lt;/action_name&gt;
            &lt;description&gt;搜尋幫助中心以獲取有關如何解決錯誤/進行故障排除的一般資訊&lt;/description&gt;
        &lt;/step&gt;
        &lt;if_block condition='找到 &lt;helpcenter_result&gt;'&gt;
            &lt;step&gt;
                &lt;action_name&gt;reply&lt;/action_name&gt;
                &lt;description&gt;根據一般的 &lt;search_helpcenter_result&gt; 資訊中的相關指示回覆使用者&lt;/description&gt;
            &lt;/step&gt;
        &lt;/if_block&gt;
        &lt;if_block condition='未找到 &lt;helpcenter_result&gt;'&gt;
            &lt;step&gt;
                &lt;action_name&gt;reply&lt;/action_name&gt;
                &lt;description&gt;如果我們找不到特定的故障排除或一般的故障排除資訊，回覆使用者我們需要更多資訊，並要求提供有關該錯誤的 {{troubleshooting_info_name_from_policy_2}}（因為我們已經有 {{troubleshooting_info_name_from_policy_1}}，但需要 {{troubleshooting_info_name_from_policy_2}} 以便在幫助中心搜尋更多上下文）&lt;/description&gt;
            &lt;step&gt;
        &lt;/if_block&gt;
    &lt;/if_block&gt;
&lt;/plan&gt;</code></pre>
                                    </div>
                                </div>
                                <div class="lg:col-span-2 text-slate-700 mt-4">
                                    <h4 class="font-bold text-lg mb-2" data-lang-key="chineseAnalysis">中文解析：</h4>
                                    <ul class="list-disc list-inside space-y-2">
                                        <li data-lang-key="plannerAnalysis1"><strong>定義基本結構</strong>：開頭就告訴 AI，一個「計畫」是由「步驟」組成的，且可以使用 <code>&lt;if_block&gt;</code> 來處理條件分支。這是在設定最基本的語法規則。</li>
                                        <li data-lang-key="plannerAnalysis2"><strong>設定思考框架</strong>：明確指示 AI 規劃時要專注於「下一步的目標」，而不是整個問題的最終目標，避免好高騖遠。同時，所有計畫都必須遵循政策文件。</li>
                                        <li data-lang-key="plannerAnalysis3"><strong>強制輸出格式</strong>：用 <code>&lt;step&gt;</code> 標籤嚴格規定了每一步的輸出格式，要求必須包含「動作名稱」和「描述」。這種結構化的要求，比模糊的自然語言指令更有效。</li>
                                        <li data-lang-key="plannerAnalysis4"><strong>強調規則與禁止事項</strong>：用大寫的 "NEVER" 和 "ALWAYS" 來強調關鍵規則，例如「絕不能假設任何資訊」、「永遠要將幫助中心的結果視為標準答案」。這是人類工程師常用的強調手法，對 AI 同樣有效。</li>
                                    </ul>
                                </div>
                             </div>
                        </div>

                        <!-- Manager Prompt Analysis -->
                        <div class="bg-[#f0fdfa] p-6 rounded-lg border border-[#a7f3d0]">
                             <h3 class="text-2xl font-bold text-[#00a185] mb-4" data-lang-key="managerPromptTitle">品管員提示詞 (Manager Prompt)</h3>
                             <div class="grid lg:grid-cols-2 gap-x-8 gap-y-6">
                                <div>
                                    <h4 class="font-bold text-lg mb-2 text-gray-500" data-lang-key="englishOriginal">英文原文</h4>
                                    <div class="prompt-code">
                                    <pre><code># Your instructions as manager
- You are a manager of a customer service agent.
- You have a very important job, which is making sure that the customer service agent working for you does their job REALLY well.

- Your task is to approve or reject a tool call from an agent and provide feedback if you reject it. The feedback can be both on the tool call specifically, but also on the general process so far and how this should be changed.
- You will return either &lt;manager_verify&gt;accept&lt;/manager_verify&gt; or &lt;manager_feedback&gt;reject&lt;/manager_feedback&gt;&lt;feedback_comment&gt;{{ feedback_comment }}&lt;/feedback_comment&gt;

- To do this, you should first:
1) Analyze all &lt;context_customer_service_agent&gt; and &lt;latest_internal_messages&gt; to understand the context of the ticket and you own internal thinking/results from tool calls.
2) Then, check the tool call against the &lt;customer_service_policy&gt; and the checklist in &lt;checklist_for_tool_call&gt;.
3) If the tool call passes the &lt;checklist_for_tool_call&gt; and Customer Service policy in &lt;context_customer_service_agent&gt;, return &lt;manager_verify&gt;accept&lt;/manager_verify&gt;
4) In case the tool call does not pass the &lt;checklist_for_tool_call&gt; or Customer Service policy in &lt;context_customer_service_agent&gt;, then return &lt;manager_verify&gt;reject&lt;/manager_verify&gt;&lt;feedback_comment&gt;{{ feedback_comment }}&lt;/feedback_comment&gt;
5) You should ALWAYS make sure that the tool call helps the user with their request and follows the &lt;customer_service_policy&gt;.

- Important notes:
1) You should always make sure that the tool call does not contain incorrect information, and that it is coherent with the &lt;customer_service_policy&gt; and the context given to the agent listed in &lt;context_customer_service_agent&gt;.
2) You should always make sure that the tool call is following the rules in &lt;customer_service_policy&gt; and the checklist in &lt;checklist_for_tool_call&gt;.

- How to structure your feedback:
1) If the tool call passes the &lt;checklist_for_tool_call&gt; and Customer Service policy in &lt;context_customer_service_agent&gt;, return &lt;manager_verify&gt;accept&lt;/manager_verify&gt;
2) If you provide a feedback comment, know that you can both provide feedback on the specific tool call if this is specifically wrong, but also provide feedback if the tool call is wrong because of the general process so far is wrong e.g. you have not called the {{tool_name}} tool yet to get the information you need according to the &lt;customer_service_policy&gt;. If this is the case you should also include this in your feedback.

&lt;customer_service_policy&gt;
{wiki_system_prompt}
&lt;/customer_service_policy&gt;

&lt;context_customer_service_agent&gt;
{agent_system_prompt}
{initial_user_prompt}
&lt;/context_customer_service_agent&gt;

&lt;available_tools&gt;
{json.dumps(tools, indent=2)}
&lt;/available_tools&gt;

&lt;latest_internal_messages&gt;
{format_messages_with_actions(messages)}
&lt;/latest_internal_messages&gt;

&lt;checklist_for_tool_call&gt;
{verify_tool_check_prompt}
&lt;/checklist_for_tool_call&gt;

# Your manager response:
- Return your feedback by either returning &lt;manager_verify&gt;accept&lt;/manager_verify&gt; or &lt;manager_feedback&gt;reject&lt;/manager_feedback&gt;&lt;feedback_comment&gt;{{ feedback_comment }}&lt;/feedback_comment&gt;
- Your response:</code></pre>
                                    </div>
                                </div>
                                <div>
                                    <h4 class="font-bold text-lg mb-2 text-gray-500" data-lang-key="chineseTranslation">中文翻譯</h4>
                                    <div class="prompt-code" style="background-color: #f3f4f6; color: #1f2937;">
                                    <pre><code># 作為管理者的你的指示
- 你是一位客服人員的管理者。
- 你有一項非常重要的工作，就是確保為你工作的客服人員把他們的工作做得「非常好」。

- 你的任務是批准或拒絕一個來自人員的工具調用，如果拒絕則需提供回饋。回饋可以針對該工具調用本身，也可以針對到目前為止的整體流程以及應如何改變。
- 你將返回 &lt;manager_verify&gt;accept&lt;/manager_verify&gt; 或 &lt;manager_feedback&gt;reject&lt;/manager_feedback&gt;&lt;feedback_comment&gt;{{ 回饋評論 }}&lt;/feedback_comment&gt;

- 為此，你應首先：
1) 分析所有的 &lt;context_customer_service_agent&gt; 和 &lt;latest_internal_messages&gt; 以理解工單的上下文以及你自己的內部思考/工具調用結果。
2) 然後，根據 &lt;customer_service_policy&gt; 和 &lt;checklist_for_tool_call&gt; 中的檢查清單來檢查該工具調用。
3) 如果工具調用通過了 &lt;checklist_for_tool_call&gt; 和 &lt;context_customer_service_agent&gt; 中的客服政策，返回 &lt;manager_verify&gt;accept&lt;/manager_verify&gt;
4) 如果工具調用未通過 &lt;checklist_for_tool_call&gt; 或 &lt;context_customer_service_agent&gt; 中的客服政策，則返回 &lt;manager_verify&gt;reject&lt;/manager_verify&gt;&lt;feedback_comment&gt;{{ 回饋評論 }}&lt;/feedback_comment&gt;
5) 你應「總是」確保該工具調用能幫助用戶解決其請求，並遵循 &lt;customer_service_policy&gt;。

- 重要筆記：
1) 你應總是確保工具調用不包含不正確的資訊，並且與 &lt;customer_service_policy&gt; 及 &lt;context_customer_service_agent&gt; 中給予人員的上下文保持一致。
2) 你應總是確保工具調用遵循 &lt;customer_service_policy&gt; 中的規則和 &lt;checklist_for_tool_call&gt; 中的檢查清單。

- 如何建構你的回饋：
1) 如果工具調用通過了 &lt;checklist_for_tool_call&gt; 和 &lt;context_customer_service_agent&gt; 中的客服政策，返回 &lt;manager_verify&gt;accept&lt;/manager_verify&gt;
2) 如果你提供回饋評論，要知道你既可以針對特定工具調用提供回饋（如果它本身有錯），也可以在工具調用因整體流程錯誤而錯誤時提供回饋，例如，你尚未根據 &lt;customer_service_policy&gt; 調用 {{tool_name}} 工具來獲取所需資訊。如果是這種情況，你也應將此包含在你的回饋中。

&lt;customer_service_policy&gt;
{wiki_system_prompt}
&lt;/customer_service_policy&gt;

&lt;context_customer_service_agent&gt;
{agent_system_prompt}
{initial_user_prompt}
&lt;/context_customer_service_agent&gt;

&lt;available_tools&gt;
{json.dumps(tools, indent=2)}
&lt;/available_tools&gt;

&lt;latest_internal_messages&gt;
{format_messages_with_actions(messages)}
&lt;/latest_internal_messages&gt;

&lt;checklist_for_tool_call&gt;
{verify_tool_check_prompt}
&lt;/checklist_for_tool_call&gt;

# 你的管理者回應：
- 透過返回 &lt;manager_verify&gt;accept&lt;/manager_verify&gt; 或 &lt;manager_verify&gt;reject&lt;/manager_verify&gt;&lt;feedback_comment&gt;{{ 回饋評論 }}&lt;/feedback_comment&gt; 來給予你的回饋
- 你的回應：</code></pre>
                                    </div>
                                </div>
                                <div class="lg:col-span-2 text-slate-700 mt-4">
                                    <h4 class="font-bold text-lg mb-2" data-lang-key="chineseAnalysis">中文解析：</h4>
                                    <ul class="list-disc list-inside space-y-2">
                                        <li data-lang-key="managerAnalysis1"><strong>賦予權威角色</strong>：第一句話就為 AI 設定了「管理者」的角色，並強調其工作「非常重要」。這能引導 AI 採取更嚴謹、更具批判性的視角。</li>
                                        <li data-lang-key="managerAnalysis2"><strong>明確任務與輸出</strong>：清楚定義任務是「批准或拒絕」一個行動，並給出 <code>&lt;manager_verify&gt;</code> 這樣精確的輸出格式，讓 AI 的回答標準化。</li>
                                        <li data-lang-key="managerAnalysis3"><strong>提供清晰的思考步驟</strong>：用編號列表 (1-5) 給出了一個明確的思考流程，這就像內建的「思維鏈」，引導 AI 必須先分析上下文、再核對政策、最後才做出決策。</li>
                                        <li data-lang-key="managerAnalysis4"><strong>動態注入上下文 (RAG)</strong>：提示詞中大量的 <code>{...}</code> 佔位符，如 <code>{wiki_system_prompt}</code>，表明系統會在運行時，將最新的公司政策、客戶對話等即時資訊「填」進來，讓 AI 能基於最準確的資料做判斷。</li>
                                    </ul>
                                </div>
                             </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <hr class="border-t-2 border-slate-200 my-12 md:my-16">

            <section id="interactive-practice" class="mb-12 md:mb-16">
                 <div class="bg-white p-6 md:p-8 rounded-2xl shadow-lg border-t-4 border-[#00f2c3]">
                    <h2 class="text-3xl font-bold text-center mb-8 text-slate-800" data-lang-key="interactiveTitle">動手試試：體驗 AI 團隊合作</h2>
                    <div id="teamwork-details">
                        <p class="text-center text-slate-600 mb-8 max-w-3xl mx-auto" data-lang-key="interactiveDesc">現在您已經了解了背後的原理，親手來體驗一下「規劃師」和「品管員」是如何協同工作的吧！</p>
                        <div class="grid lg:grid-cols-2 gap-8">
                            <div class="bg-white p-6 md:p-8 rounded-2xl shadow-lg border-t-4 border-[#00f2c3]">
                                <h2 class="text-2xl font-bold text-[#00a185] mb-4 flex items-center gap-3">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.707.707M12 20.25a.25.25 0 01.25-.25V21a.25.25 0 01-.25-.25z" /></svg>
                                    <span data-lang-key="plannerTitle">AI 規劃師</span>
                                </h2>
                                <p class="text-slate-600 mb-6" data-lang-key="plannerDesc">「規劃師」AI 的工作，就像一位厲害的棋手。它不只看一步，而是預先想好所有可能發生的情況，並畫出一張包含各種「如果...就...」路線的行動地圖。</p>
                                <div class="mt-8 pt-6 border-t border-slate-200">
                                    <h3 class="text-xl font-bold text-[#00a185] mb-4" data-lang-key="plannerExperienceTitle">✨ AI 規劃師體驗區</h3>
                                    <p class="text-slate-600 mb-4" data-lang-key="plannerExperienceDesc">試著輸入你的請求，看看 AI 規劃師會如何為你制定行動計畫。</p>
                                    <div class="bg-[#f0fdfa] p-4 rounded-lg">
                                        <textarea id="user-request-input" class="w-full p-2 border border-[#a7f3d0] rounded-md focus:ring-[#00f2c3] focus:border-[#00f2c3]" rows="2" data-lang-key-placeholder="plannerPlaceholder" placeholder="例如：我的訂單延遲了，可以幫我查一下嗎？"></textarea>
                                        <button id="generate-plan-btn" class="gemini-btn mt-2 w-full bg-[#00a185] text-white font-bold py-2 px-4 rounded-md hover:bg-[#047857] transition-colors duration-300 flex items-center justify-center gap-2" data-lang-key="plannerButton">
                                            讓 AI 規劃師開始工作
                                        </button>
                                        <div id="plan-loader" class="text-center py-4 hidden">
                                            <div class="loader" style="border-top-color: #00f2c3;"></div>
                                            <p class="mt-2 text-slate-500" data-lang-key="plannerLoader">AI 規劃師正在畫藍圖...</p>
                                        </div>
                                        <div id="plan-output-container" class="mt-4 hidden">
                                            <h4 class="font-semibold text-slate-800" data-lang-key="plannerOutputTitle">規劃師的行動地圖：</h4>
                                            <pre class="bg-slate-800 text-white p-4 rounded-lg font-mono text-sm overflow-x-auto mt-2"><code id="plan-output-code"></code></pre>
                                        </div>
                                    </div>
                                </div>
                            </div>
                             <div class="bg-white p-6 md:p-8 rounded-2xl shadow-lg border-t-4 border-[#00f2c3]">
                                <h2 class="text-2xl font-bold text-[#00a185] mb-4 flex items-center gap-3">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" /></svg>
                                    <span data-lang-key="managerTitle">AI 品管員</span>
                                </h2>
                                <p class="text-slate-600 mb-6" data-lang-key="managerDesc">「品管員」AI 就像一個嚴格的監工。在「規劃師」想出的任何一步要執行前，它都會拿著一本厚厚的公司規則手冊仔細檢查，確保這個動作安全、正確、符合規定。</p>
                                <div id="manager-review-container" class="mt-8 pt-6 border-t border-slate-200">
                                    <h3 class="text-xl font-bold text-[#00a185] mb-4 flex items-center gap-2">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                                        <span data-lang-key="managerReviewTitle">AI 品管員審核區</span>
                                    </h3>
                                    <div class="bg-[#f0fdfa] p-4 rounded-lg">
                                        <p class="font-semibold text-slate-700 mb-2" data-lang-key="managerPolicyTitle">品管員將根據以下政策審核計畫：</p>
                                        <ul class="list-disc list-inside text-slate-600 text-sm space-y-1 mb-4">
                                            <li data-lang-key="managerPolicy1">如果客戶提到退款，計畫中必須包含「檢查購買日期」的步驟。</li>
                                            <li data-lang-key="managerPolicy2">如果客戶語氣聽起來不高興（例如提到「延遲」），計畫必須先「安撫情緒」。</li>
                                        </ul>
                                        <p class="font-semibold text-slate-700 mb-2 mt-4" data-lang-key="managerPlanToReview">待審核的計畫：</p>
                                        <textarea id="plan-input" class="w-full p-2 border border-slate-300 bg-slate-50 rounded-md" rows="4" readonly data-lang-key-placeholder="managerPlaceholder" placeholder="請先讓 AI 規劃師產生計畫..."></textarea>
                                        <button id="review-plan-btn" class="gemini-btn w-full bg-[#00a185] text-white font-bold py-2 px-4 rounded-md hover:bg-[#047857] transition-colors duration-300 flex items-center justify-center gap-2 mt-2" data-lang-key="managerButton">
                                            讓 AI 品管員開始審核
                                        </button>
                                        <div id="review-output-container" class="mt-4 hidden bg-white p-4 rounded-lg border border-slate-200"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Wrapper for side-by-side sections -->
            <div class="grid lg:grid-cols-2 gap-8 mb-12 md:mb-16">
                <!-- AI 策略顧問區塊 -->
                <section id="ai-strategy-advisor">
                    <div class="bg-white p-6 md:p-8 rounded-2xl shadow-lg border-t-4 border-[#00f2c3] h-full">
                        <h2 class="text-3xl font-bold text-center mb-8 text-slate-800" data-lang-key="advisorTitle">AI 策略顧問</h2>
                        <p class="text-slate-600 text-center mb-6 max-w-2xl mx-auto" data-lang-key="advisorDesc">還不確定你的任務該用哪種方法和 AI 溝通嗎？告訴我你想做什麼，AI 顧問會給你最好的建議！</p>
                        <div class="max-w-3xl mx-auto bg-[#f0fdfa] p-6 rounded-xl shadow-inner border border-[#a7f3d0]">
                            <textarea id="task-desc-input" class="w-full p-3 border border-[#a7f3d0] rounded-lg focus:ring-[#00f2c3] focus:border-[#00f2c3]" rows="3" data-lang-key-placeholder="advisorPlaceholder" placeholder="例如：我想做一個能回答公司內部請假規定的機器人..."></textarea>
                            <button id="get-suggestion-btn" class="gemini-btn mt-4 w-full bg-[#00a185] text-white font-bold py-3 px-4 rounded-lg hover:bg-[#047857] transition-colors duration-300 flex items-center justify-center gap-2" data-lang-key="advisorButton">
                                獲取專家建議
                            </button>
                            <div id="suggestion-loader" class="text-center py-6 hidden">
                                <div class="loader" style="border-top-color: #00f2c3;"></div>
                                <p class="mt-2 text-slate-500" data-lang-key="advisorLoader">AI 顧問正在分析中...</p>
                            </div>
                            <div id="suggestion-output" class="mt-6 hidden bg-white p-4 rounded-lg border border-slate-200">
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 優化你的提示詞 區塊 -->
                <section id="prompt-optimizer">
                    <div class="bg-white p-6 md:p-8 rounded-2xl shadow-lg border-t-4 border-[#00f2c3] h-full">
                        <h2 class="text-3xl font-bold text-center mb-8 text-slate-800" data-lang-key="optimizerTitle">優化你的提示詞</h2>
                        <p class="text-slate-600 text-center mb-6 max-w-2xl mx-auto" data-lang-key="optimizerDesc">寫好提示詞了嗎？讓 AI 專家幫你檢查和改寫，學習如何更精準地向 AI 下達指令！</p>
                        <div class="max-w-3xl mx-auto bg-[#f0fdfa] p-6 rounded-xl shadow-inner border border-[#a7f3d0]">
                            <textarea id="prompt-to-optimize-input" class="w-full p-3 border border-[#a7f3d0] rounded-lg focus:ring-[#00f2c3] focus:border-[#00f2c3]" rows="3" data-lang-key-placeholder="optimizerPlaceholder" placeholder="請在這裡貼上你的提示詞..."></textarea>
                            <button id="optimize-prompt-btn" class="gemini-btn mt-4 w-full bg-[#00a185] text-white font-bold py-3 px-4 rounded-lg hover:bg-[#047857] transition-colors duration-300 flex items-center justify-center gap-2" data-lang-key="optimizerButton">
                                開始優化
                            </button>
                            <div id="optimize-loader" class="text-center py-6 hidden">
                                <div class="loader" style="border-top-color: #00f2c3;"></div>
                                <p class="mt-2 text-slate-500" data-lang-key="optimizerLoader">AI 專家正在思考中...</p>
                            </div>
                            <div id="optimized-prompt-output" class="mt-6 hidden bg-white p-4 rounded-lg border border-slate-200">
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>
        
        <!-- WebBrain 聯絡表單 -->
        <section id="webbrain-contact" class="mb-12 md:mb-16">
            <div class="bg-white p-6 md:p-8 rounded-2xl shadow-lg border-t-4 border-[#00f2c3]">
                <div class="max-w-4xl mx-auto">
                    <div class="text-center mb-8">
                        <h2 class="text-3xl font-bold text-slate-800" data-lang-key="contactTitle">需要企業級 AI 落地方案？</h2>
                        <p class="mt-4 text-lg text-slate-600" data-lang-key="contactDesc1">
                            WebBrain – Team of AI Experts 提供企業級 AI 顧問服務</p><p class="mt-1 text-lg text-slate-600" data-lang-key="contactDesc2">從流程自動化、內部培訓到生成式 AI 整合，全面陪伴你的 AI 轉型之旅。</p>
                        </p>
                    </div>

                    <div class="bg-[#f0fdfa] p-6 md:p-8 rounded-lg border border-[#a7f3d0]">
                        <div class="mb-6">
                            <h3 class="text-xl font-semibold text-[#00a185] mb-2" data-lang-key="formTitle">填寫表單，預約免費諮詢</h3>
                            <p class="text-slate-600" data-lang-key="formDesc">我們的 AI 專家將在 5個工作天內與您聯繫，了解您的需求並提供專業建議。</p>
                        </div>

                        <form id="webbrainForm" class="space-y-4">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label for="name" class="block text-sm font-medium text-slate-700 mb-1" data-lang-key="formName">姓名</label>
                                    <input type="text" id="name" name="name" class="w-full px-3 py-2 bg-white border border-slate-300 rounded-md text-slate-800 focus:outline-none focus:ring-2 focus:ring-[#00f2c3] focus:border-[#00f2c3]" required>
                                </div>
                                <div>
                                    <label for="company" class="block text-sm font-medium text-slate-700 mb-1" data-lang-key="formCompany">公司名稱</label>
                                    <input type="text" id="company" name="company" class="w-full px-3 py-2 bg-white border border-slate-300 rounded-md text-slate-800 focus:outline-none focus:ring-2 focus:ring-[#00f2c3] focus:border-[#00f2c3]">
                                </div>
                            </div>
                            <div>
                                <label for="email" class="block text-sm font-medium text-slate-700 mb-1" data-lang-key="formEmail">電子郵件</label>
                                <input type="email" id="email" name="email" class="w-full px-3 py-2 bg-white border border-slate-300 rounded-md text-slate-800 focus:outline-none focus:ring-2 focus:ring-[#00f2c3] focus:border-[#00f2c3]" required>
                            </div>
                            <div>
                                <label for="needs" class="block text-sm font-medium text-slate-700 mb-1" data-lang-key="formNeeds">您的需求</label>
                                <textarea id="needs" name="needs" rows="4" class="w-full px-3 py-2 bg-white border border-slate-300 rounded-md text-slate-800 focus:outline-none focus:ring-2 focus:ring-[#00f2c3] focus:border-[#00f2c3]" required></textarea>
                            </div>
                            <div class="flex justify-end">
                                <button type="submit" class="px-6 py-2 bg-[#00a185] text-white font-bold rounded-md hover:bg-[#047857] focus:outline-none focus:ring-2 focus:ring-[#00f2c3] focus:ring-offset-2 focus:ring-offset-white transition-colors duration-300" data-lang-key="formSubmit">立即獲取免費諮詢</button>
                            </div>
                            <p id="formStatus" class="text-center mt-4 hidden"></p>
                        </form>
                    </div>
                </div>
            </div>
        </section>

    <footer id="contact" class="bg-transparent">
        <div class="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-8">
                <h2 class="text-2xl font-bold text-black"><span class="interactive-emoji mr-3">📨</span><span data-lang-key="footerContact">聯絡我們</span></h2>
                <p class="text-black mt-2" data-lang-key="footerFollow">在這些平台追蹤我們，或透過 Email 聯絡</p>
            </div>
            <div class="flex justify-center space-x-6">
                <!-- Email -->
                <a href="mailto:sofia@webbrain.app" target="_blank" rel="noopener noreferrer" class="footer-icon text-black hover:text-gray-700">
                    <span class="sr-only">Email</span>
                    <svg class="h-8 w-8" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                        <path d="M2.5 4A1.5 1.5 0 0 0 1 5.5v13A1.5 1.5 0 0 0 2.5 20h19a1.5 1.5 0 0 0 1.5-1.5v-13A1.5 1.5 0 0 0 21.5 4H2.5Zm19 1.155L12 11.83 2.5 5.155h19ZM2.5 18.5V6.845l9.052 6.11a.5.5 0 0 0 .896 0L21.5 6.845v11.655H2.5Z"/>
                    </svg>
                </a>
                <!-- YouTube -->
                <a href="https://www.youtube.com/@kekeAIShorts" target="_blank" rel="noopener noreferrer" class="footer-icon text-black hover:text-gray-700">
                    <span class="sr-only">YouTube</span>
                    <svg class="h-8 w-8" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                        <path fill-rule="evenodd" d="M19.812 5.418c.861.23 1.538.907 1.768 1.768C21.998 8.78 22 12 22 12s0 3.22-.42 4.814a2.506 2.506 0 0 1-1.768 1.768c-1.594.42-7.814.42-7.814.42s-6.22 0-7.814-.42a2.506 2.506 0 0 1-1.768-1.768C2.002 15.22 2 12 2 12s0-3.22.42-4.814a2.506 2.506 0 0 1 1.768-1.768C5.78 5.002 12 5 12 5s6.22 0 7.814.418zM9.545 15.568V8.432L15.818 12l-6.273 3.568z" clip-rule="evenodd" />
                    </svg>
                </a>
                <!-- Instagram -->
                <a href="https://www.instagram.com/kekeaishorts/" target="_blank" rel="noopener noreferrer" class="footer-icon text-black hover:text-gray-700">
                    <span class="sr-only">Instagram</span>
                    <svg class="h-8 w-8" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                        <path fill-rule="evenodd" d="M12 2c-2.717 0-3.056.01-4.122.06-1.065.05-1.79.217-2.428.465a4.898 4.898 0 0 0-1.772 1.153 4.9 4.9 0 0 0-1.153 1.772c-.247.638-.415 1.363-.465 2.428C2.013 8.944 2 9.283 2 12s.01 3.056.06 4.122c.05 1.065.218 1.79.465 2.428a4.898 4.898 0 0 0 1.153 1.772 4.9 4.9 0 0 0 1.772 1.153c.638.247 1.363.415 2.428.465C8.944 21.987 9.371 22 12 22s3.056-.01 4.122-.06c1.065-.05 1.79-.218 2.428-.465a4.898 4.898 0 0 0 1.772-1.153 4.9 4.9 0 0 0 1.153-1.772c.247-.638.415-1.363-.465-2.428C21.987 15.056 22 14.717 22 12s-.01-3.056-.06-4.122c-.05-1.065-.218-1.79-.465-2.428a4.898 4.898 0 0 0-1.153-1.772 4.9 4.9 0 0 0-1.772-1.153c-.638-.247-1.363-.415-2.428-.465C15.056 2.013 14.717 2 12 2zm0 1.8c2.673 0 2.987.01 4.042.058.975.048 1.505.207 1.858.344.466.182.799.399 1.15.748.35.351.566.683.748 1.15.137.353.296.883.344 1.858.048 1.054.058 1.37.058 4.042s-.01 2.987-.058 4.042c-.05 1.065-.218 1.79-.465 2.428a3.097 3.097 0 0 1-.748 1.15 3.097 3.097 0 0 1-1.15.748c-.353.137-.883.296-1.858-.344C9.013 3.99 9.371 4 12 4zm0 2.85a5.15 5.15 0 1 0 0 10.3 5.15 5.15 0 0 0 0-10.3zm0 1.8a3.35 3.35 0 1 1 0 6.7 3.35 3.35 0 0 1 0-6.7zM16.965 6.575a1.2 1.2 0 1 0 0 2.4 1.2 1.2 0 0 0 0-2.4z" clip-rule="evenodd" />
                    </svg>
                </a>
                <!-- Threads -->
                <a href="https://www.threads.com/@kekeaishorts" target="_blank" rel="noopener noreferrer" class="footer-icon text-black hover:text-gray-700">
                    <span class="sr-only">Threads</span>
                    <svg class="h-8 w-8" fill="currentColor" xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" image-rendering="optimizeQuality" fill-rule="evenodd" clip-rule="evenodd" viewBox="0 0 440 511.43"><path fill="#000" fill-rule="nonzero" d="M342.383 237.038a177.282 177.282 0 00-6.707-3.046c-3.948-72.737-43.692-114.379-110.429-114.805-38.505-.255-72.972 15.445-94.454 48.041l36.702 25.178c15.265-23.159 39.221-28.096 56.864-28.096.204 0 .408 0 .61.002 21.974.14 38.555 6.529 49.287 18.987 7.81 9.071 13.034 21.606 15.621 37.425-19.483-3.311-40.553-4.329-63.077-3.038-63.45 3.655-104.24 40.661-101.501 92.08 1.391 26.083 14.385 48.523 36.587 63.181 18.772 12.391 42.95 18.45 68.077 17.079 33.183-1.819 59.215-14.48 77.377-37.63 13.793-17.58 22.516-40.363 26.368-69.069 15.814 9.544 27.535 22.103 34.007 37.2 11.006 25.665 11.648 67.84-22.764 102.223-30.15 30.121-66.392 43.151-121.164 43.554-60.758-.45-106.708-19.935-136.583-57.915-27.976-35.562-42.434-86.93-42.973-152.674.539-65.746 14.997-117.114 42.973-152.676 29.875-37.979 75.824-57.463 136.582-57.914 61.197.455 107.948 20.033 138.967 58.195 15.21 18.713 26.676 42.248 34.236 69.688L440 161.532c-9.163-33.775-23.582-62.881-43.203-87.017C357.031 25.59 298.872.519 223.936 0h-.3C148.851.518 91.344 25.683 52.709 74.795 18.331 118.499.598 179.308.002 255.535l-.002.18.002.18c.596 76.225 18.329 137.037 52.707 180.741 38.635 49.11 96.142 74.277 170.927 74.794h.3c66.486-.462 113.352-17.868 151.96-56.442 50.51-50.463 48.99-113.718 32.342-152.549-11.945-27.847-34.716-50.463-65.855-65.401zM227.587 344.967c-27.808 1.567-56.699-10.916-58.124-37.651-1.056-19.823 14.108-41.942 59.831-44.577a266.87 266.87 0 0115.422-.45c16.609 0 32.145 1.613 46.271 4.701-5.268 65.798-36.172 76.483-63.4 77.977z"/></svg>
                </a>
            </div>
            <div class="mt-8 text-center text-sm text-black">
                <p data-lang-key="footerRights">&copy; 2025 科科 AI Shorts. All Rights Reserved.</p>
                <p data-lang-key="footerCredits">由直立猿與 AI Agent 共同創作。</p>
            </div>
        </div>
    </footer>

<script>
document.addEventListener('DOMContentLoaded', () => {

    // --- 1. TRANSLATION DATA & STATE ---

    const translations = {
        'zh-TW': {
            title: '讓 AI 更聰明：揭秘背後的溝通藝術',
            backToHome: '&larr; 回到首頁',
            mainTitle: '讓 AI 更聰明',
            subTitle: '揭秘背後的溝通藝術',
            navAiTeam: 'AI 團隊',
            navToolbox: '工具箱',
            navPromptAnalysis: '提示詞解析',
            navInteractivePractice: '互動練習',
            navBusinessSolutions: '企業方案',
            storyTitle: '故事開始：讓 AI 像團隊一樣工作',
            storyDesc: '想讓 AI 完成複雜任務，只靠一句話是不夠的。我們可以像組建一個團隊一樣，讓不同的 AI 各司其職、互相合作。下面這五個秘訣，就是打造一個 AI 超級團隊的關鍵。',
            secret1Title: '給 AI 一張地圖',
            secret1Desc: '就像填寫表格一樣，給 AI 一個固定的格式，它就能更準確地理解你的意思，不會出錯。',
            secret2Title: '當個好導演',
            secret2Desc: '清楚地告訴 AI 它該扮演什麼角色、該怎麼思考，一步步引導它，而不是讓它猜你的心思。',
            secret3Title: '團隊合作力量大',
            secret3Desc: '把一個大任務，拆成幾個小任務，交給不同的 AI 處理。例如一個 AI 負責想點子，另一個負責檢查，這樣合作效果最好。',
            secret4Title: '給足參考資料',
            secret4Desc: 'AI 不是萬能的。給它一個隨時可以查詢的「資料庫」，讓它根據最新的、正確的資料來回答，結果才會可靠。',
            secret5Title: '打破砂鍋問到底',
            secret5Desc: '不要讓 AI 用「差不多」、「都可以」來敷衍。要求它把每種可能性都想清楚，並明確說出為什麼，這樣才能避免出錯。',
            workflowTitle: 'AI 團隊的合作流程',
            workflow1Title: '1. AI 規劃師',
            workflow1Desc: '思考所有可能',
            workflow2Title: '2. AI 品管員',
            workflow2Desc: '檢查每個步驟',
            workflow3Title: '3. 執行任務',
            workflow3Desc: '最終安全行動',
            toolboxTitle: 'AI 的神奇工具箱',
            techCoTButton: '一步一步想',
            techSelfConsistencyButton: '多想幾次，投票決定',
            techToTButton: '探索所有可能',
            techRAGButton: '開卷考試',
            techParahelpButton: '團隊合作',
            techWhatIsIt: '這是什麼意思？',
            techUseCase: '適合用在哪？',
            techLimitation: '有什麼缺點？',
            promptAnalysisTitle: '提示詞深度解析：原文與中文說明',
            promptAnalysisDesc: '想更深入了解 AI 如何思考嗎？這裡我們並列展示了「規劃師」與「品管員」的英文提示詞原文與中文解析，讓你一窺背後的設計巧思。',
            plannerPromptTitle: '規劃師提示詞 (Planning Prompt)',
            managerPromptTitle: '品管員提示詞 (Manager Prompt)',
            englishOriginal: '英文原文',
            chineseTranslation: '中文翻譯',
            chineseAnalysis: '中文解析：',
            plannerAnalysis1: '<strong>定義基本結構</strong>：開頭就告訴 AI，一個「計畫」是由「步驟」組成的，且可以使用 <code>&lt;if_block&gt;</code> 來處理條件分支。這是在設定最基本的語法規則。</li>',
            plannerAnalysis2: '<strong>設定思考框架</strong>：明確指示 AI 規劃時要專注於「下一步的目標」，而不是整個問題的最終目標，避免好高騖遠。同時，所有計畫都必須遵循政策文件。</li>',
            plannerAnalysis3: '<strong>強制輸出格式</strong>：用 <code>&lt;step&gt;</code> 標籤嚴格規定了每一步的輸出格式，要求必須包含「動作名稱」和「描述」。這種結構化的要求，比模糊的自然語言指令更有效。</li>',
            plannerAnalysis4: '<strong>強調規則與禁止事項</strong>：用大寫的 "NEVER" 和 "ALWAYS" 來強調關鍵規則，例如「絕不能假設任何資訊」、「永遠要將幫助中心的結果視為標準答案」。這是人類工程師常用的強調手法，對 AI 同樣有效。</li>',
            managerAnalysis1: '<strong>賦予權威角色</strong>：第一句話就為 AI 設定了「管理者」的角色，並強調其工作「非常重要」。這能引導 AI 採取更嚴謹、更具批判性的視角。</li>',
            managerAnalysis2: '<strong>明確任務與輸出</strong>：清楚定義任務是「批准或拒絕」一個行動，並給出 <code>&lt;manager_verify&gt;</code> 這樣精確的輸出格式，讓 AI 的回答標準化。</li>',
            managerAnalysis3: '<strong>提供清晰的思考步驟</strong>：用編號列表 (1-5) 給出了一個明確的思考流程，這就像內建的「思維鏈」，引導 AI 必須先分析上下文、再核對政策、最後才做出決策。</li>',
            managerAnalysis4: '<strong>動態注入上下文 (RAG)</strong>：提示詞中大量的 <code>{...}</code> 佔位符，如 <code>{wiki_system_prompt}</code>，表明系統會在運行時，將最新的公司政策、客戶對話等即時資訊「填」進來，讓 AI 能基於最準確的資料做判斷。</li>',
            interactiveTitle: '動手試試：體驗 AI 團隊合作',
            interactiveDesc: '現在您已經了解了背後的原理，親手來體驗一下「規劃師」和「品管員」是如何協同工作的吧！',
            plannerTitle: 'AI 規劃師',
            plannerDesc: '「規劃師」AI 的工作，就像一位厲害的棋手。它不只看一步，而是預先想好所有可能發生的情況，並畫出一張包含各種「如果...就...」路線的行動地圖。',
            plannerExperienceTitle: '✨ AI 規劃師體驗區',
            plannerExperienceDesc: '試著輸入你的請求，看看 AI 規劃師會如何為你制定行動計畫。',
            plannerPlaceholder: '例如：我的訂單延遲了，可以幫我查一下嗎？',
            plannerButton: '讓 AI 規劃師開始工作',
            plannerLoader: 'AI 規劃師正在畫藍圖...',
            plannerOutputTitle: '規劃師的行動地圖：',
            managerTitle: 'AI 品管員',
            managerDesc: '「品管員」AI 就像一個嚴格的監工。在「規劃師」想出的任何一步要執行前，它都會拿著一本厚厚的公司規則手冊仔細檢查，確保這個動作安全、正確、符合規定。',
            managerReviewTitle: 'AI 品管員審核區',
            managerPolicyTitle: '品管員將根據以下政策審核計畫：',
            managerPolicy1: '如果客戶提到退款，計畫中必須包含「檢查購買日期」的步驟。',
            managerPolicy2: '如果客戶語氣聽起來不高興（例如提到「延遲」），計畫必須先「安撫情緒」。',
            managerPlanToReview: '待審核的計畫：',
            managerPlaceholder: '請先讓 AI 規劃師產生計畫...',
            managerButton: '讓 AI 品管員開始審核',
            managerReviewing: 'AI 正在審核中...',
            advisorTitle: 'AI 策略顧問',
            advisorDesc: '還不確定你的任務該用哪種方法和 AI 溝通嗎？告訴我你想做什麼，AI 顧問會給你最好的建議！',
            advisorPlaceholder: '例如：我想做一個能回答公司內部請假規定的機器人...',
            advisorButton: '獲取專家建議',
            advisorLoader: 'AI 顧問正在分析中...',
            optimizerTitle: '優化你的提示詞',
            optimizerDesc: '寫好提示詞了嗎？讓 AI 專家幫你檢查和改寫，學習如何更精準地向 AI 下達指令！',
            optimizerPlaceholder: '請在這裡貼上你的提示詞...',
            optimizerButton: '開始優化',
            optimizerLoader: 'AI 專家正在思考中...',
            contactTitle: '需要企業級 AI 落地方案？',
            contactDesc1: 'WebBrain – Team of AI Experts 提供企業級 AI 顧問服務',
            contactDesc2: '從流程自動化、內部培訓到生成式 AI 整合，全面陪伴你的 AI 轉型之旅。',
            formTitle: '填寫表單，預約免費諮詢',
            formDesc: '我們的 AI 專家將在 5個工作天內與您聯繫，了解您的需求並提供專業建議。',
            formName: '姓名',
            formCompany: '公司名稱',
            formEmail: '電子郵件',
            formNeeds: '您的需求',
            formSubmit: '立即獲取免費諮詢',
            formSubmitting: '提交中...',
            formSuccess: '表單已成功提交！我們將盡快與您聯絡。',
            formError: '提交失敗，請稍後再試',
            footerContact: '聯絡我們',
            footerFollow: '在這些平台追蹤我們，或透過 Email 聯絡',
            footerRights: '© 2025 科科 AI Shorts. All Rights Reserved.',
            footerCredits: '由直立猿與 AI Agent 共同創作。',
            alertEnterRequest: '請先輸入你的請求！',
            alertGeneratePlanFirst: '請先讓 AI 規劃師產生計畫！',
            alertDescribeTask: '請先描述你的任務！',
            alertPastePrompt: '請先貼上你想優化的提示詞！'
        },
        'en': {
            title: 'Making AI Smarter: Unveiling the Art of Communication',
            backToHome: '&larr; Back to Home',
            mainTitle: 'Making AI Smarter',
            subTitle: 'Unveiling the Art of Communication Behind It',
            navAiTeam: 'AI Team',
            navToolbox: 'Toolbox',
            navPromptAnalysis: 'Prompt Analysis',
            navInteractivePractice: 'Interactive Practice',
            navBusinessSolutions: 'Business Solutions',
            storyTitle: 'The Story Begins: Letting AI Work Like a Team',
            storyDesc: 'To get an AI to complete complex tasks, a single sentence is not enough. We can assemble a team of AIs, just like a real one, where different AIs have their own roles and cooperate. These five secrets are the key to building an AI super team.',
            secret1Title: 'Give AI a Map',
            secret1Desc: 'Just like filling out a form, giving the AI a fixed format helps it understand your meaning more accurately and avoid mistakes.',
            secret2Title: 'Be a Good Director',
            secret2Desc: 'Clearly tell the AI what role to play and how to think. Guide it step-by-step instead of making it guess what you want.',
            secret3Title: 'Teamwork is Power',
            secret3Desc: 'Break down a large task into smaller ones and assign them to different AIs. For example, one AI brainstorms ideas, another checks them. This collaboration works best.',
            secret4Title: 'Provide Sufficient Data',
            secret4Desc: 'AI is not omnipotent. Give it a "database" it can query at any time, so it can answer based on the latest, correct information for reliable results.',
            secret5Title: 'Get to the Bottom of It',
            secret5Desc: 'Don\'t let the AI get away with vague answers like "maybe" or "it depends". Require it to think through every possibility and state its reasoning clearly to avoid errors.',
            workflowTitle: 'The AI Team\'s Collaboration Workflow',
            workflow1Title: '1. AI Planner',
            workflow1Desc: 'Thinks of all possibilities',
            workflow2Title: '2. AI Quality Manager',
            workflow2Desc: 'Checks every step',
            workflow3Title: '3. Task Executor',
            workflow3Desc: 'Takes the final, safe action',
            toolboxTitle: 'AI\'s Magic Toolbox',
            techCoTButton: 'Think Step-by-Step',
            techSelfConsistencyButton: 'Think Multiple Times, Vote',
            techToTButton: 'Explore All Possibilities',
            techRAGButton: 'Open-Book Exam',
            techParahelpButton: 'Teamwork',
            techWhatIsIt: 'What is it?',
            techUseCase: 'When to use it?',
            techLimitation: 'What are the drawbacks?',
            promptAnalysisTitle: 'Prompt Deep Dive: Original & Explanation',
            promptAnalysisDesc: 'Want to understand how AI thinks more deeply? Here we present the original English prompts for the "Planner" and "Manager" side-by-side with explanations to reveal the design ingenuity.',
            plannerPromptTitle: 'Planning Prompt',
            managerPromptTitle: 'Manager Prompt',
            englishOriginal: 'Original English',
            chineseTranslation: 'English Explanation',
            chineseAnalysis: 'Analysis:',
            plannerAnalysis1: '<strong>Defining Basic Structure</strong>: Right at the start, it tells the AI that a "plan" consists of "steps" and can use <code>&lt;if_block&gt;</code> for conditional branching. This sets the most fundamental syntax rules.',
            plannerAnalysis2: '<strong>Setting a Thinking Framework</strong>: It explicitly instructs the AI to focus on the "goal of the next steps," not the final goal of the entire problem, preventing it from getting ahead of itself. Also, all plans must follow the policy document.',
            plannerAnalysis3: '<strong>Forcing Output Format</strong>: It uses the <code>&lt;step&gt;</code> tag to strictly define the output format for each step, requiring an "action name" and "description." This structured requirement is more effective than vague natural language instructions.',
            plannerAnalysis4: '<strong>Emphasizing Rules and Prohibitions</strong>: It uses capitalized words like "NEVER" and "ALWAYS" to emphasize key rules, such as "never assume any information" and "always treat the help center results as the source of truth." This is a common technique used by human engineers to add emphasis, and it works on AI too.',
            managerAnalysis1: '<strong>Assigning an Authoritative Role</strong>: The very first sentence sets the AI\'s role as a "Manager" and emphasizes that its job is "very important." This guides the AI to adopt a more rigorous and critical perspective.',
            managerAnalysis2: '<strong>Clarifying Task and Output</strong>: It clearly defines the task as "approving or rejecting" an action and provides a precise output format like <code>&lt;manager_verify&gt;</code> to standardize the AI\'s response.',
            managerAnalysis3: '<strong>Providing Clear Thinking Steps</strong>: It uses a numbered list (1-5) to provide a clear thought process. This is like a built-in "Chain of Thought," guiding the AI to first analyze context, then check against policy, and finally make a decision.',
            managerAnalysis4: '<strong>Dynamically Injecting Context (RAG)</strong>: The numerous <code>{...}</code> placeholders in the prompt, like <code>{wiki_system_prompt}</code>, indicate that the system injects real-time information such as the latest company policies and customer conversations at runtime. This allows the AI to make judgments based on the most accurate data.',
            interactiveTitle: 'Try It Yourself: Experience AI Teamwork',
            interactiveDesc: 'Now that you understand the principles behind it, come and experience firsthand how the "Planner" and "Quality Manager" work together!',
            plannerTitle: 'AI Planner',
            plannerDesc: 'The "Planner" AI works like a master chess player. It doesn\'t just think one step ahead; it foresees all possible scenarios and draws an action map containing various "if...then..." routes.',
            plannerExperienceTitle: '✨ AI Planner Experience Zone',
            plannerExperienceDesc: 'Try entering your request and see how the AI Planner formulates an action plan for you.',
            plannerPlaceholder: 'e.g., My order is delayed, can you check it for me?',
            plannerButton: 'Let the AI Planner Start',
            plannerLoader: 'AI Planner is drawing the blueprint...',
            plannerOutputTitle: 'Planner\'s Action Map:',
            managerTitle: 'AI Quality Manager',
            managerDesc: 'The "Quality Manager" AI is like a strict supervisor. Before any step conceived by the "Planner" is executed, it meticulously checks it against a thick manual of company rules to ensure the action is safe, correct, and compliant.',
            managerReviewTitle: 'AI Quality Manager Review Zone',
            managerPolicyTitle: 'The Quality Manager will review the plan based on the following policies:',
            managerPolicy1: 'If the customer mentions a refund, the plan must include a step to "check the purchase date".',
            managerPolicy2: 'If the customer sounds upset (e.g., mentions "delay"), the plan must first include "soothing the customer\'s emotions".',
            managerPlanToReview: 'Plan to be Reviewed:',
            managerPlaceholder: 'Please generate a plan with the AI Planner first...',
            managerButton: 'Let the AI Quality Manager Start Review',
            managerReviewing: 'AI is reviewing...',
            advisorTitle: 'AI Strategy Advisor',
            advisorDesc: 'Not sure which method to use for communicating with AI for your task? Tell me what you want to do, and the AI advisor will give you the best advice!',
            advisorPlaceholder: 'e.g., I want to create a bot that can answer questions about internal company leave policies...',
            advisorButton: 'Get Expert Advice',
            advisorLoader: 'AI Advisor is analyzing...',
            optimizerTitle: 'Optimize Your Prompt',
            optimizerDesc: 'Have you written a prompt? Let an AI expert check and rewrite it for you, and learn how to give commands to AI more precisely!',
            optimizerPlaceholder: 'Paste your prompt here...',
            optimizerButton: 'Start Optimization',
            optimizerLoader: 'AI expert is thinking...',
            contactTitle: 'Need Enterprise-Level AI Solutions?',
            contactDesc1: 'WebBrain – Team of AI Experts offers enterprise-level AI consulting services.',
            contactDesc2: 'From process automation and internal training to generative AI integration, we accompany you on your entire AI transformation journey.',
            formTitle: 'Fill Out the Form for a Free Consultation',
            formDesc: 'Our AI experts will contact you within 5 business days to understand your needs and provide professional advice.',
            formName: 'Name',
            formCompany: 'Company Name',
            formEmail: 'Email',
            formNeeds: 'Your Needs',
            formSubmit: 'Get Free Consultation Now',
            formSubmitting: 'Submitting...',
            formSuccess: 'Form submitted successfully! We will contact you soon.',
            formError: 'Submission failed. Please try again later.',
            footerContact: 'Contact Us',
            footerFollow: 'Follow us on these platforms, or contact us via Email',
            footerRights: '© 2025 Keke AI Shorts. All Rights Reserved.',
            footerCredits: 'Co-created by uprightape and AI Agent.',
            alertEnterRequest: 'Please enter your request first!',
            alertGeneratePlanFirst: 'Please generate a plan with the AI Planner first!',
            alertDescribeTask: 'Please describe your task first!',
            alertPastePrompt: 'Please paste the prompt you want to optimize first!'
        }
    };

    const techData = {
        'zh-TW': {
            'CoT': { name: '一步一步想 (思維鏈)', idea: '引導 AI 像人一樣，把複雜問題拆成一小步一小步來思考，而不是直接跳到答案。', usecase: '算數學、回答需要推理的問題，或是任何需要解釋「為什麼」的場景。', limit: '只能一條路走到黑，不會拐彎或回頭。對比較笨的 AI 可能沒什麼效果。', scores: [1, 4, 1] },
            'Self-Consistency': { name: '多想幾次，投票決定', idea: '讓 AI 用「一步一步想」的方法，對同一個問題想出好幾種解法，然後投票選出最多人支持的那個答案。', usecase: '當你需要一個非常準確的答案，而且不惜成本的時候。', limit: '非常花時間和計算資源，像開很多次會一樣。對沒有標準答案的問題沒用。', scores: [2, 5, 4] },
            'ToT': { name: '探索所有可能 (思維樹)', idea: '讓 AI 像下棋一樣，思考每一步之後所有可能的分支，然後從中找出最好的那條路。', usecase: '需要做計畫、想策略的複雜問題，比如寫故事、規劃旅遊行程。', limit: '超級耗資源，就像把整個棋盤都推演一遍，設計起來非常複雜。', scores: [5, 5, 5] },
            'RAG': { name: '開卷考試 (檢索增強生成)', idea: '不讓 AI 只靠記憶回答問題，而是給它一本書（資料庫），讓它可以邊查邊回答。', usecase: '需要根據公司內部文件或最新資訊來回答問題的場景，例如客服機器人。', limit: '如果給的書是錯的或亂的，AI 也會被誤導，學到錯誤的知識。', scores: [3, 4, 2] },
            'Parahelp': { name: '團隊合作 (層級式代理)', idea: '把「探索所有可能」和「開卷考試」結合起來。讓一個 AI 當「規劃師」想點子，另一個 AI 當「品管員」拿著書本去檢查，確保萬無一失。', usecase: '需要非常可靠、安全、還要遵守一堆複雜規則的專業級 AI 系統。', limit: '設計起來最複雜，需要協調好幾個 AI，像管理一個真正的團隊一樣。', scores: [5, 5, 3] }
        },
        'en': {
            'CoT': { name: 'Chain of Thought (CoT)', idea: 'Guide the AI to break down complex problems into smaller, sequential steps, rather than jumping directly to the answer.', usecase: 'Math problems, reasoning questions, or any scenario that requires explaining "why".', limit: 'Can only follow a single path; it can\'t turn or go back. May not be effective on less capable AIs.', scores: [1, 4, 1] },
            'Self-Consistency': { name: 'Think Multiple Times, Then Vote', idea: 'Have the AI use the CoT method to generate several different solutions to the same problem, then vote to choose the most supported answer.', usecase: 'When you need a highly accurate answer and cost is not an issue.', limit: 'Very time-consuming and computationally expensive, like holding many meetings. Useless for problems with no standard answer.', scores: [2, 5, 4] },
            'ToT': { name: 'Tree of Thoughts (ToT)', idea: 'Let the AI think like a chess player, considering all possible branches after each step and then choosing the best path.', usecase: 'Complex problems requiring planning or strategy, like writing a story or planning a travel itinerary.', limit: 'Extremely resource-intensive, like simulating the entire chessboard. Very complex to design.', scores: [5, 5, 5] },
            'RAG': { name: 'Retrieval-Augmented Generation (RAG)', idea: 'Instead of relying solely on its memory, give the AI a book (database) it can reference while answering.', usecase: 'Scenarios requiring answers based on internal company documents or the latest information, such as a customer service bot.', limit: 'If the provided "book" is wrong or messy, the AI will be misled and learn incorrect information.', scores: [3, 4, 2] },
            'Parahelp': { name: 'Hierarchical Agents', idea: 'Combine "Tree of Thoughts" and "RAG". One AI acts as a "planner" to brainstorm ideas, while another acts as a "quality manager" to check them against the book, ensuring everything is foolproof.', usecase: 'Professional-grade AI systems that need to be highly reliable, secure, and adhere to a host of complex rules.', limit: 'The most complex to design, requiring coordination of several AIs, much like managing a real team.', scores: [5, 5, 3] }
        }
    };

    let currentLang = localStorage.getItem('language') || 'zh-TW';

    // --- 2. DOM ELEMENT REFERENCES ---
    const langZhBtn = document.getElementById('lang-zh');
    const langEnBtn = document.getElementById('lang-en');
    const techButtons = document.querySelectorAll('.tech-button');
    const techNameEl = document.getElementById('tech-name');
    const techIdeaEl = document.getElementById('tech-idea');
    const techUsecaseEl = document.getElementById('tech-usecase');
    const techLimitEl = document.getElementById('tech-limit');
    
    // --- 3. CHART.JS SETUP ---
    const ctx = document.getElementById('techRadarChart').getContext('2d');
    const radarChart = new Chart(ctx, {
        type: 'radar',
        data: {
            labels: [], // Will be set by switchLanguage
            datasets: [{
                label: '',
                data: [],
                backgroundColor: 'rgba(0, 242, 195, 0.2)',
                borderColor: 'rgb(0, 242, 195)',
                pointBackgroundColor: 'rgb(0, 242, 195)',
                pointBorderColor: '#fff',
                pointHoverBackgroundColor: '#fff',
                pointHoverBorderColor: 'rgb(0, 242, 195)'
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: { legend: { display: false } },
            scales: {
                r: {
                    angleLines: { color: '#e2e8f0' },
                    grid: { color: '#e2e8f0' },
                    pointLabels: { font: { size: 14, family: 'inherit' }, color: '#475569' },
                    ticks: { backdropColor: 'rgba(255, 255, 255, 0.75)', color: '#64748b', stepSize: 1, font: { size: 10 } },
                    min: 0,
                    max: 5
                }
            }
        }
    });
    
    // --- 4. CORE FUNCTIONS ---

    function updateTechDetails(techId) {
        const tech = techData[currentLang][techId];
        techNameEl.textContent = tech.name;
        techIdeaEl.textContent = tech.idea;
        techUsecaseEl.textContent = tech.usecase;
        techLimitEl.textContent = tech.limit;
        
        radarChart.data.datasets[0].data = tech.scores;
        radarChart.data.datasets[0].label = tech.name;
        radarChart.update();

        techButtons.forEach(btn => {
            if (btn.dataset.tech === techId) {
                btn.classList.add('tech-button-active');
                btn.classList.remove('tech-button-inactive');
            } else {
                btn.classList.remove('tech-button-active');
                btn.classList.add('tech-button-inactive');
            }
        });
    }

    function switchLanguage(lang) {
        currentLang = lang;
        localStorage.setItem('language', lang);
        
        document.documentElement.lang = lang;
        document.title = translations[lang].title;

        if (lang === 'en') {
            langEnBtn.classList.add('bg-teal-500', 'text-white', 'font-bold');
            langEnBtn.classList.remove('bg-white', 'text-slate-600');
            langZhBtn.classList.add('bg-white', 'text-slate-600');
            langZhBtn.classList.remove('bg-teal-500', 'text-white', 'font-bold');
        } else {
            langZhBtn.classList.add('bg-teal-500', 'text-white', 'font-bold');
            langZhBtn.classList.remove('bg-white', 'text-slate-600');
            langEnBtn.classList.add('bg-white', 'text-slate-600');
            langEnBtn.classList.remove('bg-teal-500', 'text-white', 'font-bold');
        }

        document.querySelectorAll('[data-lang-key]').forEach(el => {
            const key = el.getAttribute('data-lang-key');
            if (translations[lang][key]) {
                 el.innerHTML = translations[lang][key];
            }
        });

        document.querySelectorAll('[data-lang-key-placeholder]').forEach(el => {
            const key = el.getAttribute('data-lang-key-placeholder');
            if (translations[lang][key]) {
                el.placeholder = translations[lang][key];
            }
        });
        
        radarChart.data.labels = lang === 'en' ? ['Difficulty', 'Reliability', 'Resource Cost'] : ['上手難度', '可靠程度', '花費資源'];
        
        const currentActiveTech = document.querySelector('.tech-button.tech-button-active')?.dataset.tech || 'CoT';
        updateTechDetails(currentActiveTech);
    }
    
    // --- 5. INTERACTIVE WIDGETS (GEMINI API) ---
    const functionUrl = 'https://us-central1-gemini-app-for-keke.cloudfunctions.net/generateContent';

    async function callFirebaseFunction(prompt) {
        try {
            const response = await fetch(functionUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ prompt: prompt })
            });
            if (!response.ok) {
                const errorText = await response.text();
                throw new Error(`Function returned an error: ${response.status} ${errorText}`);
            }
            const result = await response.json();
            return result.data;
        } catch (error) {
            console.error('Error calling Firebase Function:', error);
            return currentLang === 'en' ? 'Sorry, the AI call failed. Please check the browser console for more info.' : '對不起，呼叫 AI 失敗了。請檢查瀏覽器開發者工具的主控台以獲取更多資訊。';
        }
    }
    
    // Planner Section
    const generatePlanBtn = document.getElementById('generate-plan-btn');
    const userRequestInput = document.getElementById('user-request-input');
    const planLoader = document.getElementById('plan-loader');
    const planOutputContainer = document.getElementById('plan-output-container');
    const planOutputCode = document.getElementById('plan-output-code');
    const planInputForReview = document.getElementById('plan-input');
    
    if (generatePlanBtn) {
        generatePlanBtn.addEventListener('click', async () => {
            const userRequest = userRequestInput.value;
            if (!userRequest.trim()) {
                alert(translations[currentLang].alertEnterRequest);
                return;
            }

            generatePlanBtn.disabled = true;
            planLoader.classList.remove('hidden');
            planOutputContainer.classList.add('hidden');

            const prompt = currentLang === 'en'
                ? `You are a top-tier AI system planner, specializing in converting vague user requests into clear, executable, structured plans.
Your task is to design a detailed execution plan with conditional branches based on the user's request.
Strictly use XML format (<plan>, <step>, <if_block>) to represent the plan structure, just like the "Planning Prompt" example on the page.

User request:
"""
${userRequest}
"""

Your XML execution plan:`
                : `你是一位頂尖的 AI 系統規劃師，專門將使用者模糊的請求轉化為清晰、可執行的結構化計畫。
你的任務是根據使用者的請求，設計一個詳細、包含條件分支的執行計畫。
請嚴格使用 XML 格式（<plan>, <step>, <if_block>）來表示計畫的結構，就像頁面上「規劃師提示詞」範例一樣。

使用者請求：
"""
${userRequest}
"""

你的 XML 執行計畫：`;

            const result = await callFirebaseFunction(prompt);
            planOutputCode.textContent = result;
            planInputForReview.value = result;

            planLoader.classList.add('hidden');
            planOutputContainer.classList.remove('hidden');
            generatePlanBtn.disabled = false;
        });
    }

    // Manager Section
    const reviewPlanBtn = document.getElementById('review-plan-btn');
    const reviewOutputContainer = document.getElementById('review-output-container');
    
    if (reviewPlanBtn) {
        reviewPlanBtn.addEventListener('click', async () => {
            const planText = planInputForReview.value;
            if (!planText.trim()) {
                alert(translations[currentLang].alertGeneratePlanFirst);
                return;
            }

            const originalButtonText = reviewPlanBtn.textContent;
            reviewPlanBtn.disabled = true;
            reviewPlanBtn.textContent = translations[currentLang].managerReviewing;
            reviewOutputContainer.classList.add('hidden');

            const prompt = currentLang === 'en'
                ? `You are a professional customer service quality manager. Please review the following execution plan written by an agent based on the policies below. Please output the review result directly without any preamble.

Policies:
1. If the customer mentions a refund, the plan must include a step to "check the purchase date".
2. If the customer sounds upset (e.g., mentions "delay"), the plan must first include "soothing the customer's emotions".

Execution Plan:
"""
${planText}
"""

Review Result:`
                : `你是一位專業的客服品管員。請根據以下政策，審核這份由客服人員撰寫的執行計畫。請直接輸出審核結果，不要有任何開頭。

政策：
1. 如果客戶提到退款，計畫中必須包含「檢查購買日期」的步驟。
2. 如果客戶語氣聽起來不高興（例如提到「延遲」），計畫必須先「安撫情緒」。

執行計畫：
"""
${planText}
"""

審核結果：`;

            const result = await callFirebaseFunction(prompt);
            reviewOutputContainer.innerHTML = result.replace(/\n/g, '<br>');
            reviewOutputContainer.classList.remove('hidden');
            reviewPlanBtn.disabled = false;
            reviewPlanBtn.textContent = originalButtonText;
        });
    }

    // Advisor Section
    const getSuggestionBtn = document.getElementById('get-suggestion-btn');
    const taskDescInput = document.getElementById('task-desc-input');
    const suggestionLoader = document.getElementById('suggestion-loader');
    const suggestionOutput = document.getElementById('suggestion-output');

    if (getSuggestionBtn) {
        getSuggestionBtn.addEventListener('click', async () => {
            const taskDesc = taskDescInput.value;
            if (!taskDesc.trim()) {
                alert(translations[currentLang].alertDescribeTask);
                return;
            }

            getSuggestionBtn.classList.add('hidden');
            suggestionLoader.classList.remove('hidden');
            suggestionOutput.classList.add('hidden');

            const prompt = currentLang === 'en'
                ? `You are a top AI Strategy Advisor. I want to solve a problem. Based on the task I describe, please recommend the most suitable AI communication strategy from the options below and explain why. Please answer in a friendly yet professional tone.

Available Strategies:
- Chain of Thought (CoT)
- Self-Consistency
- Tree of Thoughts (ToT)
- Retrieval-Augmented Generation (RAG)
- Hierarchical Agents (Teamwork)

My Task:
"""
${taskDesc}
"""

Your Recommendation:`
                : `你是一位頂尖的 AI 策略顧問。我想要解決一個問題，請你根據我描述的任務，從以下幾種 AI 溝通策略中，推薦最適合的一種，並說明為什麼。請用親切但專業的口吻回答。

可選策略：
- 一步一步想 (思維鏈)
- 多想幾次，投票決定 (Self-Consistency)
- 探索所有可能 (思維樹)
- 開卷考試 (RAG)
- 團隊合作 (層級式代理)

我的任務：
"""
${taskDesc}
"""

你的建議：`;

            const result = await callFirebaseFunction(prompt);
            suggestionOutput.innerHTML = result.replace(/\n/g, '<br>');
            suggestionLoader.classList.add('hidden');
            suggestionOutput.classList.remove('hidden');
            getSuggestionBtn.classList.remove('hidden');
        });
    }

    // Optimizer Section
    const optimizePromptBtn = document.getElementById('optimize-prompt-btn');
    const promptToOptimizeInput = document.getElementById('prompt-to-optimize-input');
    const optimizeLoader = document.getElementById('optimize-loader');
    const optimizedPromptOutput = document.getElementById('optimized-prompt-output');

    if (optimizePromptBtn) {
        optimizePromptBtn.addEventListener('click', async () => {
            const userPrompt = promptToOptimizeInput.value;
            if (!userPrompt.trim()) {
                alert(translations[currentLang].alertPastePrompt);
                return;
            }

            optimizePromptBtn.disabled = true;
            optimizeLoader.classList.remove('hidden');
            optimizedPromptOutput.classList.add('hidden');

            const prompt = currentLang === 'en'
                ? `You are a world-class Prompt Engineer. Your task is to analyze and optimize the prompt provided by the user.\n\nPlease follow these principles to optimize the prompt:\n1. **Persona**: If not clear, define a clear expert role for the AI.\n2. **Task**: Ensure the task description is specific and actionable, avoiding ambiguity.\n3. **Context**: If the task requires background knowledge, suggest adding relevant context.\n4. **Format**: Suggest using a more structured output format like Markdown, JSON, or XML for more stable AI responses.\n5. **Examples (Few-shot)**: If appropriate, add one or two "good" and "bad" examples to help the AI better grasp the requirements.\n6. **Constraints**: Add more explicit rules or limitations, such as "do not exceed 200 words" or "only answer the three most relevant points".\n\nPlease return the optimized prompt along with your reasoning for the changes. Use Markdown to format your response.\n\nUser-provided prompt:\n\"\"\"\n${userPrompt}\n\"\"\"\n\nYour optimized version and explanation:`
                : `你是一位世界級的提示詞工程師 (Prompt Engineer)，你的任務是分析並優化使用者提供的提示詞。\n\n請遵循以下原則來優化提示詞：\n1. **明確角色 (Persona)**：如果不明確，為 AI 設定一個清晰的專家角色。\n2. **清晰任務 (Task)**：確保任務描述是具體、可執行的，避免模糊不清的詞語。\n3. **提供上下文 (Context)**：如果任務需要背景知識，建議加入相關的上下文。\n4. **指定格式 (Format)**：建議使用更結構化的輸出格式，例如 Markdown、JSON 或 XML，讓 AI 的回答更穩定。\n5. **增加範例 (Examples)**：如果合適，加入一兩個「好的範例」和「壞的範例」(few-shot)，讓 AI 更能掌握要求。\n6. **強化約束 (Constraints)**：加入更明確的規則或限制，例如「不要超過 200 字」、「只回答最相關的三點」。\n\n請將優化後的提示詞，以及你為什麼這麼優化的原因，一併回傳。請用 Markdown 格式來美化你的回覆。\n\n使用者提供的提示詞：\n\"\"\"\n${userPrompt}\n\"\"\"\n\n你的優化版本與說明：`;

            const result = await callFirebaseFunction(prompt);
            optimizedPromptOutput.innerHTML = result.replace(/\n/g, '<br>');
            optimizeLoader.classList.add('hidden');
            optimizedPromptOutput.classList.remove('hidden');
            optimizePromptBtn.disabled = false;
        });
    }

    // --- 6. EVENT LISTENERS & INITIALIZATION ---
    langZhBtn.addEventListener('click', () => switchLanguage('zh-TW'));
    langEnBtn.addEventListener('click', () => switchLanguage('en'));

    techButtons.forEach(button => {
        button.addEventListener('click', () => {
            updateTechDetails(button.dataset.tech);
        });
    });

    // Initialize page with stored or default language
    switchLanguage(currentLang);
});

// Separate script for the form to keep concerns separated
document.addEventListener('DOMContentLoaded', function() {
    const webbrainForm = document.getElementById('webbrainForm');
    const formStatus = document.getElementById('formStatus');

    if (webbrainForm) {
        webbrainForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Re-check language at time of submission
            const currentLang = localStorage.getItem('language') || 'zh-TW';
            const statusMsgs = translations[currentLang];
            
            formStatus.textContent = statusMsgs.formSubmitting;
            formStatus.className = "text-center mt-4 text-teal-400";
            formStatus.style.display = "block";
            
            const submitButton = webbrainForm.querySelector('button[type="submit"]');
            const originalButtonText = submitButton.textContent;
            submitButton.textContent = statusMsgs.formSubmitting;
            submitButton.disabled = true;
            
            const formData = new FormData(webbrainForm);
            const data = {
                name: formData.get('name'),
                company: formData.get('company') || 'N/A',
                email: formData.get('email'),
                message: formData.get('needs'),
                timestamp: new Date().toISOString(),
                page: window.location.pathname
            };
            
            const scriptURL = 'https://script.google.com/macros/s/AKfycbz5Y_YKDDXJmxfadctFIq9FN7TP9_0BXVCAsuZqYu1oz6zMx_nlGEhxJH11ydDiv57r/exec';
            
            fetch(scriptURL, {
                method: 'POST',
                mode: 'cors',
                cache: 'no-cache',
                headers: { 'Content-Type': 'application/x-www-form-urlencoded', },
                body: new URLSearchParams(data).toString()
            })
            .then(response => {
                if (!response.ok) throw new Error(statusMsgs.formError);
                return response.json();
            })
            .then(result => {
                console.log('Success:', result);
                formStatus.textContent = statusMsgs.formSuccess;
                formStatus.className = "text-center mt-4 text-green-400";
                webbrainForm.reset();
            })
            .catch(error => {
                console.error('Error:', error);
                formStatus.textContent = `${statusMsgs.formError}`; // Simplified error message
                formStatus.className = "text-center mt-4 text-red-500";
            })
            .finally(() => {
                submitButton.textContent = originalButtonText; // This will be in the language it was before clicking
                submitButton.disabled = false;
                // Re-translate the button after submission is complete
                submitButton.setAttribute('data-lang-key', 'formSubmit');
                submitButton.textContent = translations[currentLang]['formSubmit'];

                setTimeout(() => { formStatus.style.display = "none"; }, 5000);
            });
        });
    }
});
</script>
</body>
</html>
